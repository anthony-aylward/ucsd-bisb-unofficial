{% macro feature(
  title,
  description,
  button_text,
  button_class='btn btn-outline-primary',
  href=none
) %}
<div class="col-md-4">
  <h2>{{ title }}</h2>
  <p>{{ description }}</p>
  <p>
    {% if href %}
    <a href="{{ href }}" class="{{ button_class }}">{{ button_text }}</a>
    {% else %}
    <button class="{{ button_class }}" disabled>{{ button_text }}</button>
    {% endif %}
  </p>
</div>
{% endmacro %}

{% macro quote(body, attribution, cite=none, safe=false) %}
{% if cite %}
<blockquote class="blockquote" cite="{{ cite }}">
{% else %}
<blockquote class="blockquote">
{% endif %}
  {{ body }}
  <footer class="blockquote-footer text-right">
    {% if cite and safe %}
    <a href="{{ cite }}">{{ attribution|safe }}</a>
    {% elif cite %}
    <a href="{{ cite }}">{{ attribution }}</a>
    {% elif safe %}
    {{ attribution|safe }}
    {% else %}
    {{ attribution }}
    {% endif %}
  </footer>
</blockquote>
{% endmacro %}

{% macro list_of_posts(posts, current_user, detail_route, update_route) %}
{% for post in posts %}
  {% if loop.first %}
    <hr>
  {% endif %}
  <article class="post">
    <header>
      <div>
        <h1><a href="{{ url_for(detail_route, id=post.id) }}">{{ post.title }}</a></h1>
        <div class="about">by {{ post.author.username }} on {{ post.timestamp.strftime('%Y-%m-%d') }}</div>
      </div>
      {% if current_user.id == post.user_id %}
        <a class="btn btn-outline-primary" href="{{ url_for(update_route, id=post.id) }}">Edit</a>
      {% endif %}
    </header>
    <p class="body">{{ post.preview }}</p>
  </article>
  {% if not loop.last %}
    <hr>
  {% endif %}
{% endfor %}
{% endmacro %}

{% macro list_of_comments(comments, current_user, delete_comment_route) %}
{% for comment in comments %}
  {% if loop.first %}
    <hr>
  {% endif %}
  <article class="post">
    <header>
      <div class="about">by {{ comment.author.username }} on {{ comment.timestamp.strftime('%Y-%m-%d') }}</div>
      {% if current_user.id == comment.user_id %}
        <a class="btn btn-outline-primary" href="{{ url_for(delete_comment_route, id=comment.id) }}">Delete</a>
      {% endif %}
    </header>
    <p class="body">{{ comment.body }}</p>
  </article>
  {% if not loop.last %}
    <hr>
  {% endif %}
{% endfor %}
{% endmacro %}

{% macro search_results(posts, current_user) %}
{% for post in posts %}
  {% if loop.first %}
    <hr>
  {% endif %}
  <article class="post">
    <header>
      <div>
        <h1>{{ post.title }}</h1>
        <div class="about">by {{ post.author.username }} on {{ post.timestamp.strftime('%Y-%m-%d') }}</div>
      </div>
    </header>
    <p class="body">{{ post.preview }}</p>
  </article>
  {% if not loop.last %}
    <hr>
  {% endif %}
{% endfor %}
{% endmacro %}